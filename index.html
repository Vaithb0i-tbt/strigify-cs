<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bloxd.io Script Hider</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 700px;
      margin: auto;
    }
    textarea {
      width: 100%;
      height: 200px;
      margin-top: 10px;
    }
    .output {
      white-space: pre-wrap;
      background: #f3f3f3;
      padding: 10px;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <h1>Bloxd.io Script Hider</h1>
  <p>Upload a .txt file to encode its contents and generate hidden code you can paste into Bloxd.io.</p>

  <input type="file" id="fileInput" accept=".txt"><br><br>
  <button onclick="processFile()">Convert and Generate</button>

  <h3>Base64 Encoded:</h3>
  <div class="output" id="base64Output"></div>

  <h3>Bloxd Code Snippet:</h3>
  <textarea readonly id="bloxdCode"></textarea>

  <script>
    // Base64 encoding function
    function base64Encode(str) {
      return btoa(unescape(encodeURIComponent(str)));
    }

    // Main function to process file and generate base64 and code snippet
    function processFile() {
      const file = document.getElementById('fileInput').files[0];
      if (!file) {
        alert("Please select a .txt file first.");
        return;
      }

      const reader = new FileReader();
      reader.onload = function () {
        const text = reader.result;  // The text content of the uploaded file
        const encoded = base64Encode(text);  // Base64 encode the file's content

        // Display the base64 encoded content
        document.getElementById('base64Output').textContent = encoded;

        // Generate Bloxd.io-compatible decoding code
        const bloxdSnippet = `
function base64Decode(str) {
  const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
  let output = "";
  let buffer = 0, bits = 0;

  for (let i = 0; i < str.length; i++) {
    const char = str[i];
    if (char === '=') break;
    buffer = (buffer << 6) + chars.indexOf(char);
    bits += 6;
    if (bits >= 8) {
      bits -= 8;
      output += String.fromCharCode((buffer >> bits) & 0xFF);
    }
  }

  return output;
}

const hiddenData = "${encoded}";
const decoded = base64Decode(hiddenData);
// Now you can safely use `decoded` in your Bloxd.io game logic
        `.trim();

        // Display the Bloxd code snippet
        document.getElementById('bloxdCode').value = bloxdSnippet;
      };

      // Read the file as text
      reader.readAsText(file);
    }
  </script>
</body>
</html>
