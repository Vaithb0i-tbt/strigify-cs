<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obfuscated Code Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #282c34;
            color: white;
            text-align: center;
            padding: 20px;
        }
        button {
            background-color: #61dafb;
            color: #282c34;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background-color: #21a1f1;
        }
    </style>
</head>
<body>
    <h1>Welcome to the Obfuscated Website</h1>
    <p>This site demonstrates hidden and obfuscated code.</p>
    <button id="executeBtn">Click Me</button>

    <script>
        // Base64 encoded function (an example function that doubles the number)
        const obfuscatedCode = atob("ZnVuY3Rpb24gaW5pdCgnVGVzdCcpIHsgaW5pdChyZXF1ZXN0T3B0aW9uLCBxdWVzdGlvbikgeyB2YXIgcmVzID0gcXVlc3Rpb24gKyBxdWVzdGlvbjsgc3VjaGVzcyBhcHBsaWNhdGlvbiB0aGF0IG1hZ2ljdWxld3JlIHRoZSBhZ2luIHRoZSBhdmF0YXJ5Lg==");
        eval(obfuscatedCode); // Execute the decoded function.

        // WebAssembly loading
        fetch('core.wasm').then(response => response.arrayBuffer())
        .then(buffer => WebAssembly.instantiate(buffer))
        .then(wasmModule => {
            const wasmInstance = wasmModule.instance;
            const result = wasmInstance.exports.double(10);
            console.log("WASM Result: ", result);
        });

        // Self-modifying code example (changes function at runtime)
        let modifyCode = () => {
            let modifiedFunction = () => alert("Modified function executed!");
            return modifiedFunction;
        };
        const dynamicFunc = modifyCode();
        dynamicFunc(); // Executes the modified function

        // Proxies used to hide logic
        const hiddenLogic = new Proxy({}, {
            get: function(target, prop) {
                if (prop === 'special') {
                    return function() {
                        alert("This is a hidden special function!");
                    };
                }
                return undefined;
            }
        });

        document.getElementById("executeBtn").addEventListener("click", function() {
            // Accessing the hidden logic via Proxy
            hiddenLogic.special();
        });
    </script>

    <!-- Add WebAssembly file if you have one -->
    <script>
        // For demonstration purposes, you should place the core.wasm file in your server's folder
        // or modify this to dynamically load the WebAssembly from a URL.
    </script>
</body>
</html>
