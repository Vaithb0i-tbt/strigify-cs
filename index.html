<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Code Steganography</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .copy-tooltip {
      position: relative;
    }
    .copy-tooltip::after {
      content: 'Copied!';
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      background: green;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .copy-tooltip:active::after {
      opacity: 1;
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
  <div class="bg-white shadow-2xl rounded-2xl p-8 w-full max-w-4xl">
    <h1 class="text-3xl font-bold text-center mb-6 text-gray-800">üïµÔ∏è Steganographic Code Embedding</h1>
    <div class="grid md:grid-cols-2 gap-6">
      <div class="space-y-4">
        <div>
          <label class="block text-gray-700 font-bold mb-2">Code to Hide</label>
          <textarea id="codeInput" rows="8" class="w-full border rounded p-2 bg-gray-50"
            placeholder="Enter the code you want to hide..."></textarea>
        </div>
        <div>
          <label class="block text-gray-700 font-bold mb-2">Secret Key</label>
          <input type="password" id="encryptionKey" class="w-full border rounded p-2 bg-gray-50"
            placeholder="Enter a secret encryption key">
        </div>
        <button onclick="embedCode()" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition">
          Hide Code
        </button>
        <div class="mt-4">
          <label class="block text-gray-700 font-bold mb-2">Embedded Text</label>
          <div class="relative">
            <textarea id="embeddedText" rows="6" readonly class="w-full border rounded p-2 bg-gray-100"
              placeholder="Embedded text will appear here..."></textarea>
            <button onclick="copyEmbeddedText()" class="absolute top-2 right-2 bg-gray-200 px-2 py-1 rounded copy-tooltip">
              üìã Copy
            </button>
          </div>
        </div>
      </div>
      <div class="space-y-4">
        <div>
          <label class="block text-gray-700 font-bold mb-2">Text to Extract From</label>
          <textarea id="extractionText" rows="8" class="w-full border rounded p-2 bg-gray-50"
            placeholder="Paste the text containing hidden code..."></textarea>
        </div>
        <div>
          <label class="block text-gray-700 font-bold mb-2">Decryption Key</label>
          <input type="password" id="decryptionKey" class="w-full border rounded p-2 bg-gray-50"
            placeholder="Enter the secret encryption key">
        </div>
        <button onclick="extractCode()" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 transition">
          Extract Code
        </button>
        <div class="mt-4">
          <label class="block text-gray-700 font-bold mb-2">Extracted Code</label>
          <div class="relative">
            <textarea id="extractedCode" rows="6" readonly class="w-full border rounded p-2 bg-gray-100"
              placeholder="Extracted code will appear here..."></textarea>
            <button onclick="copyExtractedCode()"
              class="absolute top-2 right-2 bg-gray-200 px-2 py-1 rounded copy-tooltip">
              üìã Copy
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    class SeamlessSteganographer {
      constructor() {
        this.subjects = ['system', 'network', 'algorithm', 'protocol', 'framework'];
        this.verbs = ['processes', 'manages', 'optimizes', 'handles', 'transforms'];
        this.adjectives = ['dynamic', 'advanced', 'intelligent', 'secure', 'adaptive'];
        this.technicalNouns = ['data', 'computation', 'encryption', 'resolution', 'configuration'];
      }

      generateSentence() {
        const subject = this.subjects[Math.floor(Math.random() * this.subjects.length)];
        const verb = this.verbs[Math.floor(Math.random() * this.verbs.length)];
        const adj = this.adjectives[Math.floor(Math.random() * this.adjectives.length)];
        const noun = this.technicalNouns[Math.floor(Math.random() * this.technicalNouns.length)];
        return `The ${adj} ${subject} ${verb} complex ${noun} efficiently.`;
      }

      encodeForJavaScript(code) {
        return btoa(unescape(encodeURIComponent(code)))
          .match(/.{1,10}/g)
          .map(chunk => `/* ${chunk} */`);
      }

      embedCode(code, key) {
        const encrypted = CryptoJS.AES.encrypt(code, key).toString();
        const encryptedChunks = this.encodeForJavaScript(encrypted);
        const sentences = [];
        let chunkIndex = 0;
        for (let i = 0; i < encryptedChunks.length * 3; i++) {
          let sentence = this.generateSentence();
          if (chunkIndex < encryptedChunks.length && Math.random() > 0.7) {
            sentence += ` ${encryptedChunks[chunkIndex]}`;
            chunkIndex++;
          }
          sentences.push(sentence);
        }
        return sentences.join(' ');
      }

      extractCode(text, key) {
        const encryptedChunks = (text.match(/\/\*\s*([^*]+)\s*\*\//g) || [])
          .map(chunk => chunk.replace(/\/\*\s*|\s*\*\//g, ''))
          .join('');
        const decrypted = CryptoJS.AES.decrypt(encryptedChunks, key);
        const decryptedCode = decrypted.toString(CryptoJS.enc.Utf8);
        return decryptedCode || '‚ö†Ô∏è Failed to decrypt: Possibly wrong key or corrupt input.';
      }
    }

    const stego = new SeamlessSteganographer();

    function embedCode() {
      const codeInput = document.getElementById('codeInput');
      const encryptionKey = document.getElementById('encryptionKey');
      const embeddedTextArea = document.getElementById('embeddedText');
      if (!codeInput.value.trim()) {
        alert('Please enter code to hide!');
        return;
      }
      if (!encryptionKey.value.trim()) {
        alert('Please enter an encryption key!');
        return;
      }
      try {
        const embeddedText = stego.embedCode(codeInput.value, encryptionKey.value);
        embeddedTextArea.value = embeddedText;
      } catch (error) {
        alert('Embedding failed: ' + error.message);
      }
    }

    function extractCode() {
      const extractionText = document.getElementById('extractionText');
      const decryptionKey = document.getElementById('decryptionKey');
      const extractedCodeArea = document.getElementById('extractedCode');
      if (!extractionText.value.trim()) {
        alert('Please paste the text containing hidden code!');
        return;
      }
      if (!decryptionKey.value.trim()) {
        alert('Please enter the decryption key!');
        return;
      }
      try {
        const extractedCode = stego.extractCode(extractionText.value, decryptionKey.value);
        extractedCodeArea.value = extractedCode;
      } catch (error) {
        alert('Extraction failed: ' + error.message);
      }
    }

    function copyEmbeddedText() {
      const embeddedText = document.getElementById('embeddedText');
      navigator.clipboard.writeText(embeddedText.value)
        .then(() => console.log('Copied embedded text!'))
        .catch(err => alert('Failed to copy: ' + err));
    }

    function copyExtractedCode() {
      const extractedCode = document.getElementById('extractedCode');
      navigator.clipboard.writeText(extractedCode.value)
        .then(() => console.log('Copied extracted code!'))
        .catch(err => alert('Failed to copy: ' + err));
    }
  </script>
</body>
</html>
